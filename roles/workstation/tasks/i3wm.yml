- name: install the i3 window manager packages
  dnf: name={{ item }}
       state=present
  ignore_errors: yes
  with_items:
    - i3-gaps
    - i3-gaps-doc
    - i3-ipc
    - i3lock
    - i3status
    - rofi
    - lightdm
    - lightdm-gtk
    - lightdm-gtk-greeter-settings
    - thunar
    - lxrandr
    - xbacklight
    - blueman
    - feh
    - scrot
    - ImageMagick
    - acpi
    - python3-tkinter
    - pavucontrol
    - polybar
    - pygtk2
    - xautolock
  tags:
    - i3wm

- name: disable gdm
  systemd:
    name: gdm
    enabled: no
  tags:
    - i3wm

- name: enable lightdm
  systemd:
    name: lightdm
    enabled: yes
  tags:
    - i3wm

- name: copy i3-lock to /usr/local/bin
  copy:
    src: usr/local/bin/i3-lock
    dest: /usr/local/bin/i3-lock
    owner: root
    group: root
    mode: 0755
  tags:
    - i3wm

- name: copy suspend service to systemd
  copy:
    src: etc/systemd/system/suspend.service
    dest: /etc/systemd/system/suspend@{{ user }}.service
    owner: root
    group: root
    mode: 0644
  tags:
    - i3wm

- name: copy wallpaper to ~/.wallpaper
  copy:
    src: wallpaper/star-trek-discovery.jpg
    dest: /home/{{ user }}/.wallpaper.jpg
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0644
  tags:
    - i3wm
